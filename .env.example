#######################################################
# üîß Configuration you are most likely to change
#    (Set these for your environment before running)
#######################################################

# Environment mode for the backend.
#   development ‚Üí verbose logging, hot reload, dev defaults
#   production  ‚Üí optimized build, no debug logs
NODE_ENV=development

# AI model used by the backend, start with a small model if unsure.
# A complete list is available https://ollama.com/search
# Example: gemma3:1b, llama2, mistral, etc.
OLLAMA_MODEL=gemma3:1b

# üîë Secret used to sign JWT authentication tokens.
# Must be at least 12 characters and unique in production!
# forbiddenInProdRegex:/^super-secret-key$/ regex:/[^[:space:]]{12,}/
JWT_SECRET=super-secret-key

# üåê Comma-separated list of allowed origins for CORS.
# Add your frontend URLs here, other URLs will not be able to access the website to prevent malicious attacks
# forbiddenInProdRegex:/^http://localhost:3000,https://example.com$/ regex:/[^[:space:]]{5,}/
CORS_ORIGIN=http://localhost:3000,https://example.com

# üåç URL that the frontend will use to call the backend API.
# forbiddenInProdRegex:/^http://localhost:8000/api$/ regex:/[^[:space:]]{5,}$/
NEXT_PUBLIC_API_URL=http://localhost:8000/api

# üåê Allowed CORS origins if you plan to access OpenWebUI directly, separated by semicolons.
OI_CORS_ALLOW_ORIGIN="http://localhost:3000;http://localhost:3333;http://localhost:8000;http://backend:8000;http://127.0.0.1:3333"

# üõ°Ô∏è Master admin password for critical actions.
# forbiddenInProdRegex:/^Kennwort123$/ regex:/[^[:space:]]{8,}/
MASTER_PASSWORD=Kennwort123

# üîí Swarm key for private IPFS networks.
# Required if START_PRIVATE_NETWORK=true.
# Must be a 64-character hex string.
# regex:/^([a-f0-9]{64})?$/
SWARM_KEY_SECRET=

##############################################################
# ‚öôÔ∏è Configuration that rarely needs changing
#    (Defaults should work for most setups)
##############################################################

# üöÄ Version tag for pulling backend/frontend images.
# Set to a specific version in production (e.g., 1.2.3).
VERSION=latest

# üåê If true, IPFS will NOT connect to the public network.
START_PRIVATE_NETWORK=true

# üì° Backend API port
API_PORT=8000

# Internal IPFS Cluster and gateway URLs
IPFS_CLUSTER_HOST=http://cluster0:9094
IPFS_PINSVC_HOST=http://cluster0:9097
IPFS_GATEWAY_HOST=http://ipfs0:8080

# üìú Logging level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=DEBUG

# URL where OpenWebUI backend is running
OPENWEBUI_HOST=http://webui:8080

# If true, AI models configured in this file will be auto-downloaded if missing in the docker volume
AUTO_DOWNLOAD=true

# If true, disables all AI-related functionality, i.e. if a document is uploaded, no AI processing will be executed
DISABLE_ALL_AI_FUNCTIONALITY=false

# Path to the backend SQLite database file
DATABASE_PATH=/app/data/truspace.db

# ‚è≥ JWT token expiration time (in seconds)
JWT_MAX_AGE=86400

# üåê Public frontend URL
FRONTEND_URL=http://localhost:3000

# üõ°Ô∏è Content Security Policy (CSP) settings
CONTENT_SECURITY_POLICY_DEFAULT_URLS=
CONTENT_SECURITY_POLICY_IMG_URLS=
CONTENT_SECURITY_POLICY_FRAME_URLS=
CONTENT_SECURITY_POLICY_SCRIPT_URLS=
CONTENT_SECURITY_POLICY_WORKER_URLS=

# ‚è±Ô∏è API request limit per minute to prevent denial of service attacks
RATE_LIMIT_PER_MINUTE=200

# If true, new users must be approved before activation. You need to either change it in the sqlite DB or configure the SMTP server to get the activation email!
REGISTER_USERS_AS_INACTIVE=false

##############################################################
# üìß SMTP Email Settings
##############################################################
SMTP_HOST="host.docker.internal"
SMTP_USER=
SMTP_PASSWORD=   # regex:/[^[:space:]]{8,}/
SMTP_PORT=1025
SMTP_SSL=false
SMTP_TLS=false
EMAIL_SENDER="TruSpace <truspace@truspace.com>"

# AI/LLM Settings 
##############################################################
# üñ•Ô∏è AI and LLM Settings used for AI processing.
##############################################################       

# LLM Provider choices are currently: openwebui ; openai ; mistral
LLM_PROVIDER=openwebui
# Set your OPENAI Model, see https://platform.openai.com/docs/models
OPENAI_MODEL=gpt-4.1
OPENAI_API_KEY=""
# Set your Mistral Model, see https://docs.mistral.ai/getting-started/models/models_overview/
MISTRAL_MODEL="open-mistral-nemo"
MISTRAL_API_KEY=""

# OpenWeb UI
##############################################################
# üñ•Ô∏è OpenWebUI Admin Settings used for AI processing, see https://openwebui.com/
##############################################################

# Admin email for OpenWebUI
# forbiddenInProdRegex:/^admin@example.com$/ regex:/^[^[:space:]]+@[^[:space:]]+\.[^[:space:]]+$/
ADMIN_USER_EMAIL=admin@example.com

# Admin password for OpenWebUI
# forbiddenInProdRegex:/^admin@example.com$/ regex:/[^[:space:]]{8,}/
ADMIN_USER_PASSWORD=admin

# Secret key for OpenWebUI sessions (min. 12 chars)
# forbiddenInProdRegex:/^admin@example.com$/ regex:/[^[:space:]]{12,}/
WEBUI_SECRET_KEY="t0p-s3cr3t"

# Port for OpenWebUI service
OPEN_WEBUI_PORT=3333

##############################################################
# üé® Frontend Settings
##############################################################
FRONTEND_PORT=3000

##############################################################
# üì¶ IPFS Cluster - General Settings
##############################################################

# Cluster secret (64 characters). Keep private!
# forbiddenInProdRegex:/^c141a2511dae98dde9a8606a0c259d362c7449b12ce3c47f69d1e12203246f92$/ regex:/[^[:space:]]{64,}$/
CLUSTER_SECRET=c141a2511dae98dde9a8606a0c259d362c7449b12ce3c47f69d1e12203246f92

# Interval between cluster peer health checks
CLUSTER_MONITORPINGINTERVAL="2s"

# Multiaddresses for cluster APIs
CLUSTER_RESTAPI_HTTPLISTENMULTIADDRESS=/ip4/0.0.0.0/tcp/9094
CLUSTER_PINSVCAPI_HTTPLISTENMULTIADDRESS=/ip4/0.0.0.0/tcp/9097

# API & pinning service ports
OPEN_API_PORT=9094
PINNING_SERVICE_PORT=9097

# Cluster swarm port (peer-to-peer)
CLUSTER_SWARM_PORT=9096

##############################################################
# üîó IPFS Cluster - Node 0
##############################################################
CLUSTER_PEERNAME_0=cluster0
CLUSTER_IPFSHTTP_NODEMULTIADDRESS_0=/dns4/ipfs0/tcp/5001
CLUSTER_CRDT_TRUSTEDPEERS_0="*"


##############################################################
# üåê IPFS Kubo Node Settings
##############################################################
SWARM_PORT=4001
IPFS_API_PORT=5001
IPFS_GATEWAY_PORT=8080
